
<!DOCTYPE html>
<html>
<head>
    <title>RAGAS Evaluation - rewriter_rag</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1600px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header { background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%); color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0; }
        .metric-box { background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #4CAF50; }
        .metric-value { font-size: 28px; font-weight: bold; color: #4CAF50; }
        .metric-label { font-size: 14px; color: #666; margin-bottom: 5px; }
        .low-performance { border-left-color: #dc3545; }
        .low-performance .metric-value { color: #dc3545; }
        .medium-performance { border-left-color: #ffc107; }
        .medium-performance .metric-value { color: #ffc107; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 12px; }
        th { background: #4CAF50; color: white; padding: 10px; text-align: left; position: sticky; top: 0; }
        td { padding: 8px; border-bottom: 1px solid #ddd; }
        tr:hover { background: #f8f9fa; }
        .excellent { background-color: #e8f5e8; }
        .very-good { background-color: #f0f8f0; }
        .good { background-color: #fff8e1; }
        .regular { background-color: #fff3e0; }
        .bad { background-color: #ffebee; }
        .very-bad { background-color: #ffcdd2; }
        .filter-container { margin: 20px 0; display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
        .filter-container input, .filter-container select { padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .search-input { width: 300px; }
        .table-container { max-height: 600px; overflow-y: auto; border: 1px solid #ddd; border-radius: 4px; }
        .score-cell { font-weight: bold; }
        .score-high { color: #4CAF50; }
        .score-medium { color: #ff9800; }
        .score-low { color: #f44336; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📊 RAGAS Evaluation Dashboard</h1>
            <h2>REWRITER_RAG</h2>
            <p>Generated: 2025-08-29 00:29:10</p>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-box">
                <div class="metric-label">Total Questions</div>
                <div class="metric-value">10</div>
            </div>
            <div class="metric-box ">
                <div class="metric-label">Avg Faithfulness</div>
                <div class="metric-value">0.894</div>
            </div>
            <div class="metric-box medium-performance">
                <div class="metric-label">Avg Answer Relevancy</div>
                <div class="metric-value">0.653</div>
            </div>
            <div class="metric-box ">
                <div class="metric-label">Avg Context Precision</div>
                <div class="metric-value">0.703</div>
            </div>
            <div class="metric-box ">
                <div class="metric-label">Avg Context Recall</div>
                <div class="metric-value">0.800</div>
            </div>
            <div class="metric-box ">
                <div class="metric-label">Overall Average</div>
                <div class="metric-value">0.763</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Avg Execution Time</div>
                <div class="metric-value">8.52s</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Total Input Tokens</div>
                <div class="metric-value">17,376</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Total Output Tokens</div>
                <div class="metric-value">3,166</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Total Embedding Tokens</div>
                <div class="metric-value">0</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Total Cost</div>
                <div class="metric-value">$0.0517</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Avg Cost per Question</div>
                <div class="metric-value">$0.0052</div>
            </div>
            <div class="metric-box ">
                <div class="metric-label">Low RAGAS Performance</div>
                <div class="metric-value">2 (20.0%)</div>
            </div>
        </div>
        
        <div class="filter-container">
            <input type="text" id="searchInput" class="search-input" placeholder="🔍 Search questions, answers..." onkeyup="searchTable()">
            <select id="performanceFilter" onchange="filterByPerformance()">
                <option value="all">All Performance Levels</option>
                <option value="high">High RAGAS (≥0.7)</option>
                <option value="medium">Medium RAGAS (0.6-0.7)</option>
                <option value="low">Low RAGAS (<0.6)</option>
            </select>
            <select id="costFilter" onchange="filterByCost()">
                <option value="all">All Cost Levels</option>
                <option value="high-cost">High Cost (>avg)</option>
                <option value="low-cost">Low Cost (≤avg)</option>
            </select>
        </div>
        
        <div class="table-container">
            <table id="resultsTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Question</th>
                        <th>Ground Truth</th>
                        <th>LLM Answer</th>
                        <th>Faithfulness</th>
                        <th>Relevancy</th>
                        <th>Precision</th>
                        <th>Recall</th>
                        <th>Avg Score</th>
                        <th>Exec Time (s)</th>
                        <th>Input Tokens</th>
                        <th>Output Tokens</th>
                        <th>Embedding Tokens</th>
                        <th>Cost (USD)</th>
                    </tr>
                </thead>
                <tbody>

                    <tr class="low" data-performance="low" data-cost="high-cost" data-avg-score="0.327">
                        <td>1</td>
                        <td title="¿En qué momento y quien debe reevaluar el riesgo clínico de una paciente con embarazo de curso normal?">¿En qué momento y quien debe reevaluar el riesgo clínico de una paciente con embarazo de curso normal?</td>
                        <td title="El Ginecobstetra en la semana 28 - 30 y semana 34 – 36.">El Ginecobstetra en la semana 28 - 30 y semana 34 – 36.</td>
                        <td title="1. La reevaluación del riesgo clínico en una paciente con embarazo de curso normal debe realizarse durante el control prenatal. 

2. Según el Document...">1. La reevaluación del riesgo clínico en una paciente con embarazo de curso normal debe realizarse durante el control prenatal. 

2. Según el Document...</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-low">0.0</td>
                        <td class="score-cell score-low">0.31</td>
                        <td class="score-cell score-low">0.0</td>
                        <td class="score-cell score-low"><strong>0.327</strong></td>
                        <td>14.148</td>
                        <td>1,766</td>
                        <td>406</td>
                        <td>0</td>
                        <td>$0.006119</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="low-cost" data-avg-score="0.827">
                        <td>2</td>
                        <td title="Cual es la semana ideal para iniciar los controles prenatales">Cual es la semana ideal para iniciar los controles prenatales</td>
                        <td title="Se recomienda realizar el primer control prenatal en el primer trimestre, idealmente antes de la semana 10 de gestación.">Se recomienda realizar el primer control prenatal en el primer trimestre, idealmente antes de la semana 10 de gestación.</td>
                        <td title="La semana ideal para iniciar los controles prenatales es antes de la semana 12 de embarazo.">La semana ideal para iniciar los controles prenatales es antes de la semana 12 de embarazo.</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">0.986</td>
                        <td class="score-cell score-low">0.321</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.827</strong></td>
                        <td>7.401</td>
                        <td>1,655</td>
                        <td>225</td>
                        <td>0</td>
                        <td>$0.003939</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="low-cost" data-avg-score="0.795">
                        <td>3</td>
                        <td title="¿Cuándo se considera inicio tardío de controles prenatales?">¿Cuándo se considera inicio tardío de controles prenatales?</td>
                        <td title="después de la semana 16 – 18">después de la semana 16 – 18</td>
                        <td title="El inicio tardío de controles prenatales se considera cuando una gestante comienza su control prenatal después de la semana 26 de gestación.">El inicio tardío de controles prenatales se considera cuando una gestante comienza su control prenatal después de la semana 26 de gestación.</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">0.981</td>
                        <td class="score-cell score-low">0.2</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.795</strong></td>
                        <td>7.23</td>
                        <td>1,682</td>
                        <td>212</td>
                        <td>0</td>
                        <td>$0.004052</td>
                    </tr>

                    <tr class="low" data-performance="low" data-cost="low-cost" data-avg-score="0.425">
                        <td>4</td>
                        <td title="¿Cuál es la cantidad ideal de controles prenatales?">¿Cuál es la cantidad ideal de controles prenatales?</td>
                        <td title="se recomienda un programa de diez citas. Para una mujer multípara con un embarazo de curso normal se recomienda un programa de siete citas">se recomienda un programa de diez citas. Para una mujer multípara con un embarazo de curso normal se recomienda un programa de siete citas</td>
                        <td title="La cantidad ideal de controles prenatales para una gestante con embarazo de curso normal no se especifica directamente en los Documentos 1 y 2. Sin em...">La cantidad ideal de controles prenatales para una gestante con embarazo de curso normal no se especifica directamente en los Documentos 1 y 2. Sin em...</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-low">0.0</td>
                        <td class="score-cell score-high">0.7</td>
                        <td class="score-cell score-low">0.0</td>
                        <td class="score-cell score-low"><strong>0.425</strong></td>
                        <td>5.831</td>
                        <td>1,680</td>
                        <td>256</td>
                        <td>0</td>
                        <td>$0.004870</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="high-cost" data-avg-score="0.727">
                        <td>5</td>
                        <td title="¿Con cuál herramienta realizo la valoración de riesgo psico social en los controles prenatales?">¿Con cuál herramienta realizo la valoración de riesgo psico social en los controles prenatales?</td>
                        <td title="Se recomienda que las gestantes de bajo riesgo reciban en el momento de la inscripción al control prenatal, y luego en cada trimestre, una valoración ...">Se recomienda que las gestantes de bajo riesgo reciban en el momento de la inscripción al control prenatal, y luego en cada trimestre, una valoración ...</td>
                        <td title="1. Respuesta directa a la pregunta: No existe un consenso sobre qué instrumento debe usarse para la valoración de riesgo psicosocial en los controles ...">1. Respuesta directa a la pregunta: No existe un consenso sobre qué instrumento debe usarse para la valoración de riesgo psicosocial en los controles ...</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-low">0.0</td>
                        <td class="score-cell score-high">0.909</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.727</strong></td>
                        <td>7.205</td>
                        <td>1,661</td>
                        <td>417</td>
                        <td>0</td>
                        <td>$0.005686</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="low-cost" data-avg-score="0.986">
                        <td>6</td>
                        <td title="¿Cuándo realizar la valoración de riesgo psico social en el seguimiento de una materna?">¿Cuándo realizar la valoración de riesgo psico social en el seguimiento de una materna?</td>
                        <td title="Se recomienda evaluar el riesgo biológico y psicosocial a todas las gestantes mediante la escala de Herrera & Hurtado">Se recomienda evaluar el riesgo biológico y psicosocial a todas las gestantes mediante la escala de Herrera & Hurtado</td>
                        <td title="1. La valoración de riesgo psicosocial en el seguimiento de una materna debe realizarse en cada trimestre del embarazo.

2. Específicamente, se recomi...">1. La valoración de riesgo psicosocial en el seguimiento de una materna debe realizarse en cada trimestre del embarazo.

2. Específicamente, se recomi...</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">0.961</td>
                        <td class="score-cell score-high">0.982</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.986</strong></td>
                        <td>6.938</td>
                        <td>1,731</td>
                        <td>284</td>
                        <td>0</td>
                        <td>$0.005161</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="low-cost" data-avg-score="0.983">
                        <td>7</td>
                        <td title="¿Cada cuanto se realiza el tamizaje para depresión posparto durante el embarazo?">¿Cada cuanto se realiza el tamizaje para depresión posparto durante el embarazo?</td>
                        <td title="Se recomienda que, en el primer control prenatal, en la semana 28 de gestación y en la consulta de puerperio se identifique el riesgo de depresión pos...">Se recomienda que, en el primer control prenatal, en la semana 28 de gestación y en la consulta de puerperio se identifique el riesgo de depresión pos...</td>
                        <td title="El tamizaje para depresión postparto durante el embarazo se realiza en el primer control prenatal, en la semana 28 de gestación y en la consulta de pu...">El tamizaje para depresión postparto durante el embarazo se realiza en el primer control prenatal, en la semana 28 de gestación y en la consulta de pu...</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">0.973</td>
                        <td class="score-cell score-high">0.958</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.983</strong></td>
                        <td>11.692</td>
                        <td>1,703</td>
                        <td>273</td>
                        <td>0</td>
                        <td>$0.004248</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="high-cost" data-avg-score="0.73">
                        <td>8</td>
                        <td title="¿Cuál es la probabilidad de parto vaginal luego de una cesárea?">¿Cuál es la probabilidad de parto vaginal luego de una cesárea?</td>
                        <td title="La probabilidad de parto vaginal es de 74% luego de una cesárea sin otros riesgos asociados.">La probabilidad de parto vaginal es de 74% luego de una cesárea sin otros riesgos asociados.</td>
                        <td title="1. La probabilidad de parto vaginal luego de una cesárea es del 74%.

2. Este dato se encuentra en el Documento 1, que menciona que se recomienda info...">1. La probabilidad de parto vaginal luego de una cesárea es del 74%.

2. Este dato se encuentra en el Documento 1, que menciona que se recomienda info...</td>
                        <td class="score-cell score-low">0.2</td>
                        <td class="score-cell score-high">0.885</td>
                        <td class="score-cell score-high">0.833</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.73</strong></td>
                        <td>7.082</td>
                        <td>1,766</td>
                        <td>357</td>
                        <td>0</td>
                        <td>$0.005346</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="high-cost" data-avg-score="0.894">
                        <td>9</td>
                        <td title="¿Cuáles son las metas de ganancia de peso en las mujeres gestantes?">¿Cuáles son las metas de ganancia de peso en las mujeres gestantes?</td>
                        <td title="Se recomienda registrar el Índice de Masa Corporal (IMC) de la gestante en la cita de inscripción al control prenatal (alrededor de la semana 10) y co...">Se recomienda registrar el Índice de Masa Corporal (IMC) de la gestante en la cita de inscripción al control prenatal (alrededor de la semana 10) y co...</td>
                        <td title="1. Las metas de ganancia de peso durante la gestación se establecen según el Índice de Masa Corporal (IMC) pregestacional de la mujer. No se recomiend...">1. Las metas de ganancia de peso durante la gestación se establecen según el Índice de Masa Corporal (IMC) pregestacional de la mujer. No se recomiend...</td>
                        <td class="score-cell score-high">0.909</td>
                        <td class="score-cell score-high">0.848</td>
                        <td class="score-cell score-high">0.818</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.894</strong></td>
                        <td>10.026</td>
                        <td>1,920</td>
                        <td>413</td>
                        <td>0</td>
                        <td>$0.006591</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="high-cost" data-avg-score="0.933">
                        <td>10</td>
                        <td title="Cual es el tratamiento para las nauseas y vomito del embarazo">Cual es el tratamiento para las nauseas y vomito del embarazo</td>
                        <td title="A juicio del médico tratante, las intervenciones recomendadas para la reducción de la náusea y el vómito incluyen el jengibre, los antihistamínicos y ...">A juicio del médico tratante, las intervenciones recomendadas para la reducción de la náusea y el vómito incluyen el jengibre, los antihistamínicos y ...</td>
                        <td title="1. El tratamiento recomendado para las náuseas y vómitos durante el embarazo incluye el uso de jengibre, antihistamínicos y vitamina B6.

2. Específic...">1. El tratamiento recomendado para las náuseas y vómitos durante el embarazo incluye el uso de jengibre, antihistamínicos y vitamina B6.

2. Específic...</td>
                        <td class="score-cell score-high">0.833</td>
                        <td class="score-cell score-high">0.9</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.933</strong></td>
                        <td>7.632</td>
                        <td>1,812</td>
                        <td>323</td>
                        <td>0</td>
                        <td>$0.005728</td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>
    
    <script>
        function searchTable() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toLowerCase();
            const table = document.getElementById('resultsTable');
            const rows = table.getElementsByTagName('tr');
            
            for (let i = 1; i < rows.length; i++) {
                const text = rows[i].textContent.toLowerCase();
                rows[i].style.display = text.includes(filter) ? '' : 'none';
            }
        }
        
        function filterByPerformance() {
            const select = document.getElementById('performanceFilter');
            const filter = select.value;
            const table = document.getElementById('resultsTable');
            const rows = table.getElementsByTagName('tr');
            
            for (let i = 1; i < rows.length; i++) {
                const row = rows[i];
                const avgScore = parseFloat(row.getAttribute('data-avg-score'));
                
                let show = false;
                if (filter === 'all') {
                    show = true;
                } else if (filter === 'high' && avgScore >= 0.7) {
                    show = true;
                } else if (filter === 'medium' && avgScore >= 0.6 && avgScore < 0.7) {
                    show = true;
                } else if (filter === 'low' && avgScore < 0.6) {
                    show = true;
                }
                
                row.style.display = show ? '' : 'none';
            }
        }
        
        function filterByCost() {
            const select = document.getElementById('costFilter');
            const filter = select.value;
            const table = document.getElementById('resultsTable');
            const rows = table.getElementsByTagName('tr');
            
            for (let i = 1; i < rows.length; i++) {
                const row = rows[i];
                const costClass = row.getAttribute('data-cost');
                
                let show = false;
                if (filter === 'all') {
                    show = true;
                } else if (filter === 'high-cost' && costClass === 'high-cost') {
                    show = true;
                } else if (filter === 'low-cost' && costClass === 'low-cost') {
                    show = true;
                }
                
                row.style.display = show ? '' : 'none';
            }
        }
    </script>
</body>
</html>
