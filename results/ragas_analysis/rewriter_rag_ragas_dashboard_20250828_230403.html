
<!DOCTYPE html>
<html>
<head>
    <title>RAGAS Evaluation - rewriter_rag</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1600px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header { background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%); color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0; }
        .metric-box { background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #4CAF50; }
        .metric-value { font-size: 28px; font-weight: bold; color: #4CAF50; }
        .metric-label { font-size: 14px; color: #666; margin-bottom: 5px; }
        .low-performance { border-left-color: #dc3545; }
        .low-performance .metric-value { color: #dc3545; }
        .medium-performance { border-left-color: #ffc107; }
        .medium-performance .metric-value { color: #ffc107; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 12px; }
        th { background: #4CAF50; color: white; padding: 10px; text-align: left; position: sticky; top: 0; }
        td { padding: 8px; border-bottom: 1px solid #ddd; }
        tr:hover { background: #f8f9fa; }
        .excellent { background-color: #e8f5e8; }
        .very-good { background-color: #f0f8f0; }
        .good { background-color: #fff8e1; }
        .regular { background-color: #fff3e0; }
        .bad { background-color: #ffebee; }
        .very-bad { background-color: #ffcdd2; }
        .filter-container { margin: 20px 0; display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
        .filter-container input, .filter-container select { padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .search-input { width: 300px; }
        .table-container { max-height: 600px; overflow-y: auto; border: 1px solid #ddd; border-radius: 4px; }
        .score-cell { font-weight: bold; }
        .score-high { color: #4CAF50; }
        .score-medium { color: #ff9800; }
        .score-low { color: #f44336; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📊 RAGAS Evaluation Dashboard</h1>
            <h2>REWRITER_RAG</h2>
            <p>Generated: 2025-08-28 23:04:03</p>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-box">
                <div class="metric-label">Total Questions</div>
                <div class="metric-value">10</div>
            </div>
            <div class="metric-box ">
                <div class="metric-label">Avg Faithfulness</div>
                <div class="metric-value">0.903</div>
            </div>
            <div class="metric-box ">
                <div class="metric-label">Avg Answer Relevancy</div>
                <div class="metric-value">0.742</div>
            </div>
            <div class="metric-box ">
                <div class="metric-label">Avg Context Precision</div>
                <div class="metric-value">0.742</div>
            </div>
            <div class="metric-box ">
                <div class="metric-label">Avg Context Recall</div>
                <div class="metric-value">0.700</div>
            </div>
            <div class="metric-box ">
                <div class="metric-label">Overall Average</div>
                <div class="metric-value">0.771</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Avg Execution Time</div>
                <div class="metric-value">6.26s</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Total Input Tokens</div>
                <div class="metric-value">17,241</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Total Output Tokens</div>
                <div class="metric-value">3,057</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Total Cost</div>
                <div class="metric-value">$0.0468</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Avg Cost per Question</div>
                <div class="metric-value">$0.0047</div>
            </div>
            <div class="metric-box medium-performance">
                <div class="metric-label">Low RAGAS Performance</div>
                <div class="metric-value">3 (30.0%)</div>
            </div>
        </div>
        
        <div class="filter-container">
            <input type="text" id="searchInput" class="search-input" placeholder="🔍 Search questions, answers..." onkeyup="searchTable()">
            <select id="performanceFilter" onchange="filterByPerformance()">
                <option value="all">All Performance Levels</option>
                <option value="high">High RAGAS (≥0.7)</option>
                <option value="medium">Medium RAGAS (0.6-0.7)</option>
                <option value="low">Low RAGAS (<0.6)</option>
            </select>
            <select id="costFilter" onchange="filterByCost()">
                <option value="all">All Cost Levels</option>
                <option value="high-cost">High Cost (>avg)</option>
                <option value="low-cost">Low Cost (≤avg)</option>
            </select>
        </div>
        
        <div class="table-container">
            <table id="resultsTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Question</th>
                        <th>Ground Truth</th>
                        <th>LLM Answer</th>
                        <th>Faithfulness</th>
                        <th>Relevancy</th>
                        <th>Precision</th>
                        <th>Recall</th>
                        <th>Avg Score</th>
                        <th>Exec Time (s)</th>
                        <th>Input Tokens</th>
                        <th>Output Tokens</th>
                        <th>Cost (USD)</th>
                    </tr>
                </thead>
                <tbody>

                    <tr class="low" data-performance="low" data-cost="high-cost" data-avg-score="0.229">
                        <td>1</td>
                        <td title="¿En qué momento y quien debe reevaluar el riesgo clínico de una paciente con embarazo de curso normal?">¿En qué momento y quien debe reevaluar el riesgo clínico de una paciente con embarazo de curso normal?</td>
                        <td title="El Ginecobstetra en la semana 28 - 30 y semana 34 – 36.">El Ginecobstetra en la semana 28 - 30 y semana 34 – 36.</td>
                        <td title="1. Respuesta directa a la pregunta:
En un embarazo de curso normal, la reevaluación del riesgo clínico debe realizarse en cada trimestre del embarazo....">1. Respuesta directa a la pregunta:
En un embarazo de curso normal, la reevaluación del riesgo clínico debe realizarse en cada trimestre del embarazo....</td>
                        <td class="score-cell score-medium">0.667</td>
                        <td class="score-cell score-low">0.0</td>
                        <td class="score-cell score-low">0.25</td>
                        <td class="score-cell score-low">0.0</td>
                        <td class="score-cell score-low"><strong>0.229</strong></td>
                        <td>7.652</td>
                        <td>1,740</td>
                        <td>373</td>
                        <td>$0.005461</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="low-cost" data-avg-score="0.851">
                        <td>2</td>
                        <td title="Cual es la semana ideal para iniciar los controles prenatales">Cual es la semana ideal para iniciar los controles prenatales</td>
                        <td title="Se recomienda realizar el primer control prenatal en el primer trimestre, idealmente antes de la semana 10 de gestación.">Se recomienda realizar el primer control prenatal en el primer trimestre, idealmente antes de la semana 10 de gestación.</td>
                        <td title="El primer control prenatal debe realizarse preferentemente antes de la semana 12 de embarazo.">El primer control prenatal debe realizarse preferentemente antes de la semana 12 de embarazo.</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">0.904</td>
                        <td class="score-cell score-low">0.5</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.851</strong></td>
                        <td>6.21</td>
                        <td>1,625</td>
                        <td>138</td>
                        <td>$0.003717</td>
                    </tr>

                    <tr class="low" data-performance="low" data-cost="low-cost" data-avg-score="0.495">
                        <td>3</td>
                        <td title="¿Cuándo se considera inicio tardío de controles prenatales?">¿Cuándo se considera inicio tardío de controles prenatales?</td>
                        <td title="después de la semana 16 – 18">después de la semana 16 – 18</td>
                        <td title="El inicio tardío de controles prenatales se considera cuando una gestante comienza su control prenatal después de la semana 26 de gestación.">El inicio tardío de controles prenatales se considera cuando una gestante comienza su control prenatal después de la semana 26 de gestación.</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">0.982</td>
                        <td class="score-cell score-low">0.0</td>
                        <td class="score-cell score-low">0.0</td>
                        <td class="score-cell score-low"><strong>0.495</strong></td>
                        <td>4.808</td>
                        <td>1,683</td>
                        <td>202</td>
                        <td>$0.004039</td>
                    </tr>

                    <tr class="low" data-performance="low" data-cost="high-cost" data-avg-score="0.451">
                        <td>4</td>
                        <td title="¿Cuál es la cantidad ideal de controles prenatales?">¿Cuál es la cantidad ideal de controles prenatales?</td>
                        <td title="se recomienda un programa de diez citas. Para una mujer multípara con un embarazo de curso normal se recomienda un programa de siete citas">se recomienda un programa de diez citas. Para una mujer multípara con un embarazo de curso normal se recomienda un programa de siete citas</td>
                        <td title="La cantidad ideal de controles prenatales para una gestante con embarazo de curso normal no se especifica directamente en los Documentos 1 y 2. Sin em...">La cantidad ideal de controles prenatales para una gestante con embarazo de curso normal no se especifica directamente en los Documentos 1 y 2. Sin em...</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-low">0.0</td>
                        <td class="score-cell score-high">0.806</td>
                        <td class="score-cell score-low">0.0</td>
                        <td class="score-cell score-low"><strong>0.451</strong></td>
                        <td>6.346</td>
                        <td>1,684</td>
                        <td>294</td>
                        <td>$0.005311</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="low-cost" data-avg-score="0.94">
                        <td>5</td>
                        <td title="¿Con cuál herramienta realizo la valoración de riesgo psico social en los controles prenatales?">¿Con cuál herramienta realizo la valoración de riesgo psico social en los controles prenatales?</td>
                        <td title="Se recomienda que las gestantes de bajo riesgo reciban en el momento de la inscripción al control prenatal, y luego en cada trimestre, una valoración ...">Se recomienda que las gestantes de bajo riesgo reciban en el momento de la inscripción al control prenatal, y luego en cada trimestre, una valoración ...</td>
                        <td title="1. Respuesta directa a la pregunta:
La valoración de riesgo psicosocial en los controles prenatales se recomienda realizar mediante una entrevista en ...">1. Respuesta directa a la pregunta:
La valoración de riesgo psicosocial en los controles prenatales se recomienda realizar mediante una entrevista en ...</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">0.851</td>
                        <td class="score-cell score-high">0.909</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.94</strong></td>
                        <td>6.703</td>
                        <td>1,672</td>
                        <td>376</td>
                        <td>$0.004025</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="high-cost" data-avg-score="0.939">
                        <td>6</td>
                        <td title="¿Cuándo realizar la valoración de riesgo psico social en el seguimiento de una materna?">¿Cuándo realizar la valoración de riesgo psico social en el seguimiento de una materna?</td>
                        <td title="Se recomienda evaluar el riesgo biológico y psicosocial a todas las gestantes mediante la escala de Herrera & Hurtado">Se recomienda evaluar el riesgo biológico y psicosocial a todas las gestantes mediante la escala de Herrera & Hurtado</td>
                        <td title="1. La valoración de riesgo psicosocial en el seguimiento de una materna debe realizarse en el momento de la inscripción al control prenatal y luego en...">1. La valoración de riesgo psicosocial en el seguimiento de una materna debe realizarse en el momento de la inscripción al control prenatal y luego en...</td>
                        <td class="score-cell score-high">0.889</td>
                        <td class="score-cell score-high">0.869</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.939</strong></td>
                        <td>8.056</td>
                        <td>1,703</td>
                        <td>395</td>
                        <td>$0.005360</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="low-cost" data-avg-score="0.992">
                        <td>7</td>
                        <td title="¿Cada cuanto se realiza el tamizaje para depresión posparto durante el embarazo?">¿Cada cuanto se realiza el tamizaje para depresión posparto durante el embarazo?</td>
                        <td title="Se recomienda que, en el primer control prenatal, en la semana 28 de gestación y en la consulta de puerperio se identifique el riesgo de depresión pos...">Se recomienda que, en el primer control prenatal, en la semana 28 de gestación y en la consulta de puerperio se identifique el riesgo de depresión pos...</td>
                        <td title="El tamizaje para depresión posparto durante el embarazo se realiza trimestralmente durante el control prenatal.">El tamizaje para depresión posparto durante el embarazo se realiza trimestralmente durante el control prenatal.</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">0.988</td>
                        <td class="score-cell score-high">0.982</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.992</strong></td>
                        <td>4.577</td>
                        <td>1,771</td>
                        <td>241</td>
                        <td>$0.004242</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="low-cost" data-avg-score="0.999">
                        <td>8</td>
                        <td title="¿Cuál es la probabilidad de parto vaginal luego de una cesárea?">¿Cuál es la probabilidad de parto vaginal luego de una cesárea?</td>
                        <td title="La probabilidad de parto vaginal es de 74% luego de una cesárea sin otros riesgos asociados.">La probabilidad de parto vaginal es de 74% luego de una cesárea sin otros riesgos asociados.</td>
                        <td title="La probabilidad de parto vaginal luego de una cesárea es del 74%.">La probabilidad de parto vaginal luego de una cesárea es del 74%.</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">0.997</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.999</strong></td>
                        <td>4.75</td>
                        <td>1,736</td>
                        <td>261</td>
                        <td>$0.004158</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="high-cost" data-avg-score="0.951">
                        <td>9</td>
                        <td title="¿Cuáles son las metas de ganancia de peso en las mujeres gestantes?">¿Cuáles son las metas de ganancia de peso en las mujeres gestantes?</td>
                        <td title="Se recomienda registrar el Índice de Masa Corporal (IMC) de la gestante en la cita de inscripción al control prenatal (alrededor de la semana 10) y co...">Se recomienda registrar el Índice de Masa Corporal (IMC) de la gestante en la cita de inscripción al control prenatal (alrededor de la semana 10) y co...</td>
                        <td title="1. Las metas de ganancia de peso durante la gestación se establecen según el Índice de Masa Corporal (IMC) de la gestante al momento de la inscripción...">1. Las metas de ganancia de peso durante la gestación se establecen según el Índice de Masa Corporal (IMC) de la gestante al momento de la inscripción...</td>
                        <td class="score-cell score-high">0.9</td>
                        <td class="score-cell score-high">0.93</td>
                        <td class="score-cell score-high">0.976</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.951</strong></td>
                        <td>6.422</td>
                        <td>1,782</td>
                        <td>415</td>
                        <td>$0.006385</td>
                    </tr>

                    <tr class="high" data-performance="high" data-cost="low-cost" data-avg-score="0.868">
                        <td>10</td>
                        <td title="Cual es el tratamiento para las nauseas y vomito del embarazo">Cual es el tratamiento para las nauseas y vomito del embarazo</td>
                        <td title="A juicio del médico tratante, las intervenciones recomendadas para la reducción de la náusea y el vómito incluyen el jengibre, los antihistamínicos y ...">A juicio del médico tratante, las intervenciones recomendadas para la reducción de la náusea y el vómito incluyen el jengibre, los antihistamínicos y ...</td>
                        <td title="1. El tratamiento recomendado para las náuseas y vómitos durante el embarazo incluye el uso de jengibre, antihistamínicos y vitamina B6.

2. Específic...">1. El tratamiento recomendado para las náuseas y vómitos durante el embarazo incluye el uso de jengibre, antihistamínicos y vitamina B6.

2. Específic...</td>
                        <td class="score-cell score-low">0.571</td>
                        <td class="score-cell score-high">0.9</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high">1.0</td>
                        <td class="score-cell score-high"><strong>0.868</strong></td>
                        <td>7.062</td>
                        <td>1,845</td>
                        <td>362</td>
                        <td>$0.004126</td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>
    
    <script>
        function searchTable() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toLowerCase();
            const table = document.getElementById('resultsTable');
            const rows = table.getElementsByTagName('tr');
            
            for (let i = 1; i < rows.length; i++) {
                const text = rows[i].textContent.toLowerCase();
                rows[i].style.display = text.includes(filter) ? '' : 'none';
            }
        }
        
        function filterByPerformance() {
            const select = document.getElementById('performanceFilter');
            const filter = select.value;
            const table = document.getElementById('resultsTable');
            const rows = table.getElementsByTagName('tr');
            
            for (let i = 1; i < rows.length; i++) {
                const row = rows[i];
                const avgScore = parseFloat(row.getAttribute('data-avg-score'));
                
                let show = false;
                if (filter === 'all') {
                    show = true;
                } else if (filter === 'high' && avgScore >= 0.7) {
                    show = true;
                } else if (filter === 'medium' && avgScore >= 0.6 && avgScore < 0.7) {
                    show = true;
                } else if (filter === 'low' && avgScore < 0.6) {
                    show = true;
                }
                
                row.style.display = show ? '' : 'none';
            }
        }
        
        function filterByCost() {
            const select = document.getElementById('costFilter');
            const filter = select.value;
            const table = document.getElementById('resultsTable');
            const rows = table.getElementsByTagName('tr');
            
            for (let i = 1; i < rows.length; i++) {
                const row = rows[i];
                const costClass = row.getAttribute('data-cost');
                
                let show = false;
                if (filter === 'all') {
                    show = true;
                } else if (filter === 'high-cost' && costClass === 'high-cost') {
                    show = true;
                } else if (filter === 'low-cost' && costClass === 'low-cost') {
                    show = true;
                }
                
                row.style.display = show ? '' : 'none';
            }
        }
    </script>
</body>
</html>
